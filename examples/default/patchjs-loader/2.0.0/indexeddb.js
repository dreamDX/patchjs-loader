!function(){function n(n,t,e){if(e=e||function(){},!s)return void e(!1);var o=s.transaction(["assets"],"readwrite"),r=o.objectStore("assets");t.url=n;var c=r.put(t);c.onsuccess=function(){e(!0)},c.onerror=function(){e(!1)}}function t(n,t){if(!s)return void t(null);var e=s.transaction(["assets"],"readonly"),o=e.objectStore("assets"),r=o.get(n);r.onsuccess=function(n){t(n.target.result||null)},r.onerror=function(){t(null)}}function e(n){if(s){s.transaction(["assets"],"readwrite").objectStore("assets").delete(n)}}function o(){c.forEach(function(n){n()}),c.length=0}var s,r="PENDING",c=[],i={init:function(){var n=window.indexedDB.open("patchjsdb");n.onupgradeneeded=function(n){s=n.target.result;var t=s.createObjectStore("assets",{keyPath:"url"})},n.onsuccess=function(n){r="COMPLETE",s=n.target.result,o()},n.onerror=function(){r="COMPLETE",s=null,o()}},set:function(t,e,o){"PENDING"===r?c.push(function(){n(t,e,o)}):n(t,e,o)},get:function(n,e){"PENDING"===r?c.push(function(){t(n,e)}):t(n,e)},remove:function(n){"PENDING"===r?c.push(function(){e(n)}):e(n)}};i.init(),window.patchjs=window.patchjs||{},window.patchjs.cache=i}();